<canvas id="gameScreen" width="800" height="600">
</canvas>
<script>

///GLOBAL VARIABLES
//canvas variables
var c,cc;
//player variables
var px=py=50;
var pd=40;
//shooting variables
var reloadTime = 10;
var reloaded = reloadTime;
//bullet variables
var bullets = [];
//buttonpress variables
var keys = [];


///EVENT LISTENERS
//Read Buttons
document.addEventListener('keydown', function(e) {
	keys[e.keyCode] = true;
	//console.log(e.keyCode);  //what am I pressing?
});
//Turn off Buttons
document.addEventListener('keyup', function(e) {
	keys[e.keyCode] = false;
});


///METHODS
//ONLOAD
window.onload=function() {
	c=document.getElementById('gameScreen');
	cc=c.getContext('2d');
	setInterval(update,1000/30);
}

//BULLET
function Bullet(){
	this.x=px;
	this.y=py;
	this.init = function(){
		var bulletImg = new Image();
    bulletImg.src = "./rcket.png";
		bulletImg.onload=function(){
    	cc.drawImage(bulletImg,this.x,this.y);

			if(this.x > c.width){
				bullets.pop();
			}
		}
	}
}

//UPDATE
function update() {
	//Button Checks
	if (keys[87]){
			//Up
			if(py>(pd+1)) py-=15;
			console.log("fel");
		}
	if (keys[83]){
			//Down
			if(py<c.height-(pd+1)) py+=15;
			console.log("le");
		}
	if (keys[65]){
			//Left
			if(px>(pd+1)) px-=15;
			console.log("bal");
		}
	if (keys[68]){
			//Right
			if(px<c.width-(pd+1)) px+=15;
			console.log("jobb");
		}
	if (keys[32] && reloaded>=reloadTime){
			reloaded=0;
			var bulletino = new Bullet();
			bulletino.init();
			bullets.unshift(bulletino);
			console.log("pew");
			console.log(bullets[0]);
		}

  //Reload
		if (reloaded<reloadTime) reloaded++;

	//Draw
	cc.fillStyle='black';
	cc.fillRect(0,0,c.width,c.height);
	cc.fillStyle='white';
	if (py<(pd+1)) py=pd+1;
	else if (py>c.height-(pd+1)) py=c.height-(pd+1);
	if (px<(pd+1)) px=pd+1;
	else if (px>c.width-(pd+1)) px=c.width-(pd+1);
	cc.fillRect(px-pd/2,py-pd/2,pd,pd);
	
	for(var i = 0; i < bullets.length; i++)
	{
			bullets[i].x += 15;

			/* Remove Offstage Bullets */

			if(bullets[i].x > c.width)
			{
					bullets.pop();
			}
	}
}
</script>
